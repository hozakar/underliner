/**
 *  Underliner v1.0.0
 *  https://github.com/hozakar/underliner
 *
 *  Copyright 2014, Hakan Ozakar
 *  http://beltslib.net
 *
 *  Licensed under CC0 1.0 Universal Licence:
 *  https://creativecommons.org/publicdomain/zero/1.0/
 */

"use strict";!function(r){function n(n){if(n&&r(n).hasClass("underliner-link")&&r(n).parent(".underliner-wrapper").length){var e=r(n).parent(".underliner-wrapper");e.find(".underliner-mask, .underliner-copier").remove(),r(n).unwrap(),r(n).removeClass("underliner-link")}}var e={family:new Array,init:function(e){var i=e.parameters;i.duration=parseInt(i.duration)>=0?parseInt(i.duration):200;var t=0;e.element.each(function(){if(n(this),"A"==this.tagName&&"inline"==r(this).css("display")){var s=r(this),a="underliner-wrapper-"+e.id+"-"+t++;s.wrap('<span id="'+a+'" class="underliner-wrapper"></span>');var o=r("#"+a);o.append('<span class="underliner-mask">'+s.html()+"</span>"),o.append('<span class="underliner-copier"></span>'),o.css({font:s.css("font"),"line-height":s.css("line-height"),"letter-spacing":s.css("letter-spacing"),"word-spacing":s.css("word-spacing"),"text-rendering":s.css("text-rendering")});var l=parseInt(o.css("font-size")),c=parseInt(o.css("line-height"));c&&(l+=(c-1.125*l)/2),i.show===!0&&r("#"+a+" .underliner-copier").css({width:"100%"}),r("#"+a+" .underliner-copier").css({"background-color":i.color?i.color:s.css("color"),top:l+"px",right:"left"==i.direction?"auto":0,left:"right"==i.direction?"auto":0}),setTimeout(function(){r("#"+a+" .underliner-copier").css({transition:"width "+i.duration+"ms","-webkit-transition":"width "+i.duration+"ms","-o-transition":"width "+i.duration+"ms","-moz-transition":"width "+i.duration+"ms","-ms-transition":"width "+i.duration+"ms"})},100);var d=r("#"+a+" .underliner-mask")[0],p="#ffffff",u=s.css("background-color"),f=4==u.split(")")[0].split(",").length?parseInt(u.split(")")[0].split(",")[3])>0?1:0:1;if(f)p=u;else for(var h=d.parentNode;h;){try{u=r(h).css("background-color")}catch(m){break}if(f=4==u.split(")")[0].split(",").length?parseFloat(u.split(")")[0].split(",")[3])>0?1:0:1){p=u;break}if(h==h.parentNode)break;h=h.parentNode}for(var w=new Array,g=-2;2>=g;g++)for(var v=-1;2>v;v++)w.push(.05*g+"em "+.05*v+"em 0 "+p);r(d).css({"text-shadow":w.join(", ")}),s.addClass("underliner-link")}})}};r.fn.underliner=function(n){for(var i=-1,t=0;t<e.family.length;t++){var s=!0;for(var a in this)this[a]!=e.family[t].element[a]&&(s=!1);if(s){i=t;break}}0>i&&(e.family.push(new Object),i=e.family.length-1);var o=r.extend({color:"",direction:"center",duration:null,show:!1},n);e.family[i]={id:i,element:this,parameters:o},e.init(e.family[i])},r.fn.underlinerTerminate=function(){this.each(function(){n(this)})}}(jQuery);